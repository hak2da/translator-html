<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script data-ad-client="ca-pub-8505343734712295" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>소스 메이트</title>
<link href="googlefont.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
<!-- <script type="text/javascript" src="http://code.jquery.com/jquery-3.3.1.min.js"></script> -->
<script type="text/javascript" src="script/jquery-3.2.1.min.js"></script>
<!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script> -->
<script type="text/javascript" src="script/moment.min.js"></script>


<style>
.myButton {
	box-shadow:inset 0px 39px 0px -24px #e67a73;
	background-color:#e4685d;
	border-radius:4px;
	border:1px solid #ffffff;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	padding:6px 15px;
	text-decoration:none;
	text-shadow:0px 1px 0px #b23e35;
}
.myButton:hover {
	background-color:#eb675e;
}
.myButton:active {
	position:relative;
	top:1px;
}

</style>

</head>
<body>

<div id="wrapper">
	<div id="logo" class="container">
<!-- 		<h1><a href="index.html">Translator </a></h1> -->
		<h1><a href="index.html">SourceMate</a></h1>
		<p>소스들을 html파일로 다운받아 보세요.</p>
	</div>
	<div id="menu-wrapper">
		<div id="menu" class="container">
			<ul>
				<li class="current_page_item"><a href="index.html">홈페이지</a></li>
				<li><a href="termofuse.html">이용약관</a></li>

			</ul>
		</div>
	</div>
	<div>
	
<div id="kakaoad" style="width:5%;margin-left:6%;float:left">

	<ins class="kakao_ad_area" style="display:none;" 
 data-ad-unit    = "DAN-1hv2qu7q1gu2c" 
 data-ad-width   = "160" 
 data-ad-height  = "600"></ins> 
<script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
</div>
<div style="width:78%;float:left">
	<div style="text-align:center" class="container" >
		<textarea id="textarea1" style="width:80%; left:10%; display:inline-block;" rows="15" cols="30" name="contents" placeholder="소스를 적어주세요"></textarea>
	</div>
	<div id="buttonarea"  style="text-align:center" class="container">
		<font style="font-size:12pt;color:black;margin:0 13px 0 13px">우리의 서비스를 이용하는것은 사용자가 <a href="termofuse.html">이용약관</a>을 동의하는것으로 간주합니다</font>
		<br>
		
		<a href="javascript:gotextdown()" class="myButton">소스 변환하기</a>

	</div>
	<div style="text-align:center;" class="container">
	<iframe id="clickmonads" width="728" height="90" allowtransparency="true" src="https://tab2.clickmon.co.kr/pop/wp_ad_728.php?PopAd=CM_M_1003067%7C%5E%7CCM_A_1074438%7C%5E%7CAdver_M_1046207&mon_rf=REFERRER_URL" frameborder="0" scrolling="no"></iframe>

	</div>
	<div id="howtouse" class="container" style="font-size:15px;color:black;width:51%;">
	<div style="font-weight:bold;">이용 방법<br><br></div>
	<ul>
	<li>1.) 입력칸에 인터넷 소스의 내용을 적어주세요<br>
	인터넷 소스 예제 <br>
	<ul>
	<li>https://www.example.com/themes/images/logo.png<br></li>
	<li>magnet:?xt=urn:btih:209c8226b299b308beaf2b9cd3fb49212dbd13....<br></li>
	</ul>
	</li>
	
	<li>2.) 입력을 완료하면 소스 변환하기 버튼을 클릭하면 html 파일로 받아집니다.<br></li>
	<br>
	</ul>
	<div style="font-weight:bold;">이용시 주의 사항<br><br></div>
	<ul>
	<li>사용하기전에 이용약관을 확인해주세요<br></li>
	<li>인터넷소스는 한줄 내림으로 구분이 되어있어야 변환이 가능합니다.<br></li>
	<li>현재 변환 지원되는 소스들은 한정되어있습니다.<br></li>
	<li>chrome OR firefox 브라우저에서 이용해주세요.</li>
	</ul>
	
	</div>
	
</div>

</div>
</div>
<div id="footer">
	<p>Â© 2020 sourcemate . All rights reserved. Design by <a href="http://templated.co" rel="nofollow">TEMPLATED</a>.  Photos by <a href="http://fotogrph.com/">Fotogrph</a>.</p>
</div>
<!-- end #footer -->





</body>
</html>
<script>

function checkbrowser(){
	var agent = navigator.userAgent.toLowerCase();

	if ((agent.indexOf("chrome") != -1) && (agent.indexOf("firefox") != -1)){
// 	if (agent.indexOf("chrome") != -1){
		alert("크롬 브라우저나 파이어폭스 브라우저가 아닐 경우 사이트 이용이 안될수도 있습니다.");
	}
// 	출처: https://ooz.co.kr/67 [이러쿵저러쿵]
}

function callfunction(trig){
	$("#"+trig).trigger("click");
}

function goread(){ //텍스트에리어안의 데이터읽기테스트
	var txt = document.getElementById("textarea1").value;
	alert(txt);
}

function godown(){//다운로드 테스트
	
	download("test.html", "한글로 저장");
}

function gotextdown(){
	checkbrowser();
	
	if(!txtemptychk()){
		return;
	}
// 	callfunction("clickmonads");
	var msg = "";
	var date = new Date();
	var title=moment(date).format('YY년MM월DD일 HH:mm:ss:');
	msg = contentmaking(title);
		
	download(title+".html", msg);
	//download("test.html", document.getElementById("textarea1").value);
}
function txtemptychk(){
	var body = document.getElementById("textarea1").value;
	if(body.trim() ==""){
		alert("입력된 내용이 없습니다");
		return false;
	}
	return true;
}

function contentmaking(title){
	var body = bodymaker();
	var head = "<!DOCTYPE html>\n" + "<html>\n" + "<head>\n" + "<meta charset=\"UTF-8\">\n"
	+ "<title>"+title+"</title>\n" + "</head>\n" + "<body>"
			+ "<div style=\"width:700px;padding-left:150px;padding-top:100px;padding-bottom:100px;word-break:break-all;\">";
	var foot = "</div>\n</body>\n" + "</html>";
	return head + body + foot;
}

function bodymaker(){
	var body =document.getElementById("textarea1").value;
	body=rnreplacer(body);//이건할필요없음
	body=magnetreplacer(body);
	body = tagadder(body);

	return body;
}

function rnreplacer(body){
	while(body.indexOf("\n\n\n")!=-1) {
		//s =s.replaceAll("\n\n", "\n");
		body =replaceAll(body, "\n\n\n", "\n\n");
	}
	return body;
}

function tagadder(body) {
	body = replaceAll(body,"https:","<img src=\"https:");
	body = replaceAll(body,"http:","<br><img src=\"http:");
	body = replaceAll(body,"jpg", "jpg\"/><br>");
	body = replaceAll(body,"png", "png\"/><br>");
	//body = body.replaceAll("\r", "<br>");
	//body = body.replaceAll("magnet", "<br><br>magnet");
	return body;	
}

function replaceAll(str, searchStr, replaceStr){
   return str.split(searchStr).join(replaceStr);
}

function magnetreplacer(body){
	var sarr = body.split("\n");
	var result= "";
	for (var i = 0; i < sarr.length; i++) {
		//if(sarr[i].contentEquals("magnet")) {
		if(sarr[i].indexOf("magnet")!=-1) {				
			sarr[i]="<h3><a href=\""+sarr[i]+"\">↑↑magnet</a></h3><br><br>";
		}
		result+=sarr[i]+"\r\n\r\n";		
	}
	return result;
}

function download(filename, text) {
    var pom = document.createElement('a');
    pom.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
    pom.setAttribute('download', filename);

    if (document.createEvent) {
        var event = document.createEvent('MouseEvents');
        event.initEvent('click', true, true);
        pom.dispatchEvent(event);
    }
    else {
        pom.click();
    }
}
</script>
